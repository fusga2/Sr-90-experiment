<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="https://upload.wikimedia.org/wikipedia/commons/3/3e/Radioactive.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sr-90 Experiment</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
      body {
        font-family: 'Inter', sans-serif;
        background-color: #090A0F;
        background:
          radial-gradient(ellipse at 20% 80%, rgba(150, 50, 100, 0.25) 0%, rgba(150, 50, 100, 0) 60%),
          radial-gradient(ellipse at 80% 30%, rgba(80, 150, 120, 0.2) 0%, rgba(80, 150, 120, 0) 50%),
          radial-gradient(ellipse at 50% 50%, rgba(50, 80, 150, 0.3) 0%, rgba(50, 80, 150, 0) 70%),
          radial-gradient(ellipse at bottom, #1B2735 0%, #090A0F 100%);
        background-size: 250% 250%;
        min-height: 100vh;
        animation: move-nebula 200s ease-in-out infinite alternate;
      }

      @keyframes move-nebula {
        from { background-position: 0% 0%; }
        to { background-position: 100% 100%; }
      }

      @keyframes fly { from { transform: translateY(0px); } to { transform: translateY(-1000px); } }

      @keyframes shooting-star {
        0% { transform: translateX(0); opacity: 1; }
        100% { transform: translateX(300vw); opacity: 0; }
      }

      #star-bg { position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: -1; overflow: hidden; }
      #stars1, #stars2, #stars3 { position: absolute; left: 0; top: 0; right: 0; height: 2000px; background-repeat: repeat; background-size: 1000px 1000px; }
      #stars1 {
        background-image:
          radial-gradient(1px 1px at 100px 200px, white, transparent),
          radial-gradient(1px 1px at 250px 800px, white, transparent),
          radial-gradient(1px 1px at 400px 500px, white, transparent),
          radial-gradient(1px 1px at 620px 720px, white, transparent),
          radial-gradient(1px 1px at 800px 100px, white, transparent),
          radial-gradient(1px 1px at 950px 450px, white, transparent),
          radial-gradient(1px 1px at 150px 950px, white, transparent),
          radial-gradient(1px 1px at 500px 300px, white, transparent),
          radial-gradient(1px 1px at 50px 50px, white, transparent),
          radial-gradient(1px 1px at 180px 600px, white, transparent),
          radial-gradient(1px 1px at 330px 400px, white, transparent),
          radial-gradient(1px 1px at 470px 900px, white, transparent),
          radial-gradient(1px 1px at 600px 150px, white, transparent),
          radial-gradient(1px 1px at 750px 650px, white, transparent),
          radial-gradient(1px 1px at 880px 880px, white, transparent),
          radial-gradient(1px 1px at 920px 250px, white, transparent),
          radial-gradient(1px 1px at 20px 700px, white, transparent),
          radial-gradient(1px 1px at 550px 50px, white, transparent);
        animation: fly 200s linear infinite;
      }
      #stars2 {
        background-image:
          radial-gradient(1.5px 1.5px at 50px 300px, white, transparent),
          radial-gradient(1.5px 1.5px at 300px 100px, white, transparent),
          radial-gradient(1.5px 1.5px at 550px 600px, white, transparent),
          radial-gradient(1.5px 1.5px at 750px 250px, white, transparent),
          radial-gradient(1.5px 1.5px at 900px 900px, white, transparent),
          radial-gradient(1.5px 1.5px at 150px 700px, white, transparent),
          radial-gradient(1.5px 1.5px at 400px 400px, white, transparent),
          radial-gradient(1.5px 1.5px at 650px 850px, white, transparent),
          radial-gradient(1.5px 1.5px at 850px 500px, white, transparent),
          radial-gradient(1.5px 1.5px at 200px 50px, white, transparent);
        animation: fly 120s linear infinite;
      }
      #stars3 {
        background-image:
          radial-gradient(2px 2px at 200px 400px, white, transparent),
          radial-gradient(2px 2px at 700px 800px, white, transparent),
          radial-gradient(2px 2px at 50px 900px, white, transparent),
          radial-gradient(2px 2px at 950px 50px, white, transparent),
          radial-gradient(2px 2px at 450px 150px, white, transparent),
          radial-gradient(2px 2px at 850px 650px, white, transparent),
          radial-gradient(2px 2px at 300px 750px, white, transparent);
        animation: fly 70s linear infinite;
      }
      #shooting-stars { position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; transform: rotateZ(-45deg); }
      #shooting-stars .star { position: absolute; height: 1px; background: linear-gradient(-45deg, #59d1ff, rgba(0, 0, 255, 0)); border-radius: 999px; filter: drop-shadow(0 0 6px #69e0ff); animation: shooting-star 3s linear infinite; }
      #shooting-stars .star:nth-child(1) { top: 20%; left: 0; width: 300px; animation-delay: 0s; animation-duration: 2.8s; }
      #shooting-stars .star:nth-child(2) { top: 40%; left: 10%; width: 150px; animation-delay: 1.2s; animation-duration: 2.1s; }
      #shooting-stars .star:nth-child(3) { top: 60%; left: -20%; width: 200px; animation-delay: 2.5s; animation-duration: 3.5s; }
      #shooting-stars .star:nth-child(4) { top: 85%; left: 5%; width: 100px; animation-delay: 4.1s; animation-duration: 1.8s; }
    </style>
  </head>
  <body class="text-gray-100">
    <div id="star-bg">
      <div id="stars1"></div>
      <div id="stars2"></div>
      <div id="stars3"></div>
      <div id="shooting-stars">
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
        <div class="star"></div>
      </div>
    </div>

    <div class="min-h-screen flex flex-col font-sans">
      <header class="w-full py-4 px-8 border-b border-gray-700 bg-gray-800/30 backdrop-blur-sm sticky top-0 z-50">
        <div class="flex items-center justify-center gap-3">
          <svg class="w-6 h-6 text-blue-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" />
          </svg>
          <h1 class="text-xl font-bold tracking-tight text-gray-100">Sr-90 Experiment</h1>
        </div>
      </header>

      <main class="flex-grow flex flex-col xl:flex-row items-start justify-center p-6 gap-6 max-w-[1600px] mx-auto w-full">
        <div class="flex-grow w-full xl:w-2/3 bg-black/40 border border-gray-700 rounded-xl overflow-hidden shadow-2xl relative backdrop-blur-sm flex flex-col">
          <div class="absolute top-4 right-4 z-10 bg-gray-900/90 p-4 rounded-lg border border-gray-500 shadow-lg min-w-[160px]">
            <div class="text-xs text-gray-400 uppercase tracking-wider mb-1">Dose Rate (H*(10))</div>
            <div class="text-3xl font-mono text-yellow-400 font-bold tracking-tighter">
              <span id="doseRate">0.150</span> <span class="text-sm font-normal text-gray-400">µSv/h</span>
            </div>
            <div class="text-xs text-gray-500 mt-2 pt-2 border-t border-gray-800">
              Particles Detected: <span id="counts">0</span>
            </div>
          </div>

          <div id="heatmap-legend" class="hidden absolute bottom-20 right-4 z-10 bg-gray-900/80 p-3 rounded border border-gray-700 backdrop-blur text-xs flex flex-col gap-2">
            <div class="text-gray-300 font-bold mb-1">Dose Intensity</div>
            <div class="h-24 w-4 rounded-full bg-gradient-to-t from-[hsl(240,100%,50%)] via-[hsl(120,100%,50%)] to-[hsl(0,100%,50%)] mx-auto"></div>
            <div class="flex flex-col justify-between h-24 absolute left-10 top-8 text-[10px] text-gray-400">
              <span>High</span>
              <span>Low</span>
            </div>
          </div>

          <canvas id="simCanvas" width="800" height="400" class="w-full h-auto object-contain bg-gradient-to-b from-[#151b25] to-[#0d0e12]"></canvas>

          <div class="p-4 bg-gray-900/50 border-t border-gray-800 grid grid-cols-1 md:grid-cols-2 gap-2 text-xs text-gray-500 font-mono">
            <div>
              <span class="block text-gray-400 font-bold mb-1">FORMULA</span>
              H*(d) = K · e^(-μd) / d² + b
            </div>
            <div class="md:text-right">
              <span class="block text-blue-400/80">K = 0.170 ± 0.024 m²·µSv/h</span>
              <span class="block text-blue-400/80">μ = 0.02 m⁻¹</span>
              <span class="block text-blue-400/80">b = 0.15 µSv/h (Background)</span>
            </div>
          </div>
        </div>

        <div class="w-full xl:w-1/3 flex flex-col gap-6">
          <div class="bg-gray-800/60 border border-gray-700 rounded-xl p-6 backdrop-blur-md">
            <h2 class="text-xl font-bold text-white mb-6 flex items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
              </svg>
              Lab Controls
            </h2>

            <div class="mb-8">
              <label class="flex justify-between text-sm font-medium text-gray-300 mb-4">
                <span>Detector Position (d from PMMA)</span>
                <span id="distanceLabel" class="text-blue-400 font-mono">80 cm</span>
              </label>
              <input id="distanceSlider" type="range" min="0" max="150" value="80" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-500" />
              <div class="flex justify-between text-xs text-gray-500 mt-2 font-mono">
                <span>| 0 cm</span>
                <span>| 75 cm</span>
                <span>| 150 cm</span>
              </div>
            </div>

            <div class="flex flex-col gap-3">
              <div class="flex items-center justify-between bg-gray-900/40 p-3 rounded-lg border border-gray-700/50 mb-2">
                <span class="text-sm font-medium text-gray-300">View Mode</span>
                <label class="inline-flex items-center cursor-pointer">
                  <input id="viewToggle" type="checkbox" class="sr-only peer" />
                  <div class="relative w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                  <span id="viewLabel" class="ms-3 text-sm font-medium text-gray-400">Particles</span>
                </label>
              </div>

              <div class="flex gap-3">
                <button id="sourceToggle" class="flex-1 py-3 px-4 rounded-lg font-semibold transition-all bg-green-500/20 text-green-300 border border-green-500/50 hover:bg-green-500/30">
                  ● Source OPEN
                </button>
                <button id="resetButton" class="flex-1 bg-gray-700 hover:bg-gray-600 text-gray-200 border border-gray-600 py-3 px-4 rounded-lg font-semibold transition-colors">
                  Reset
                </button>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <script src="./simulator.js"></script>
  </body>
</html>
